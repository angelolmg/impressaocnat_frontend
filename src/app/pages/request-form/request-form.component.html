<div class="content">
	<form class="my-steps">
		<h2 class="page-title">Nova Solicitação</h2>
		<p>1. Escolha seu arquivo (.pdf)</p>

		<div class="file-input">
			<button
				type="button"
				mat-stroked-button
				(click)="fileInput.click()"
			>
				Escolher arquivo...
			</button>
			<input
				hidden
				(change)="onFileSelected($event)"
				#fileInput
				type="file"
				accept="application/pdf"
			/>
			<span class="file-name">{{ selectedFile?.name }}</span>
		</div>

		<p>2. Defina o número de cópias</p>

		<div>

			<mat-form-field>
				<mat-label>Número de cópias</mat-label>
				<input
					matInput
					type="number"
					class="copy-number-input"
					[formControl]="copyNumFormControl"
					[errorStateMatcher]="matcher"
					placeholder="Ex. 10"
				/>
				<!-- <mat-hint>Errors appear instantly!</mat-hint> -->
				@if (copyNumFormControl.hasError('min') &&
				!copyNumFormControl.hasError('required')) {
				<mat-error>Insira um valor positivo</mat-error>
				} @if (copyNumFormControl.hasError('required')) {
				<mat-error>Campo <strong>obrigatório</strong></mat-error>
				}
			</mat-form-field>
		</div>

		<div class="btn-selection">
			<button type="button" mat-flat-button>Adicionar arquivo</button>
			<button type="button" mat-button>Limpar</button>
		</div>

		

		<div class="my-table">
			<table
				mat-table
				[dataSource]="dataSource"
				matSort
				class="mat-elevation-z8"
			>
				<ng-container matColumnDef="id">
					<th mat-header-cell *matHeaderCellDef>ID</th>
					<td mat-cell *matCellDef="let element">
						{{ element.id.toString().padStart(6, "0") }}
					</td>
				</ng-container>

				<ng-container matColumnDef="file_name">
					<th mat-header-cell *matHeaderCellDef>Arquivo</th>
					<td mat-cell *matCellDef="let element">
						{{ element.file_name }}.{{ element.file_extension }}
					</td>
				</ng-container>

				<ng-container matColumnDef="page_count">
					<th mat-header-cell *matHeaderCellDef>Páginas</th>
					<td mat-cell *matCellDef="let element">
						{{ element.page_count }}
					</td>
				</ng-container>

				<ng-container matColumnDef="copy_count">
					<th mat-header-cell *matHeaderCellDef>Nº Cópias</th>
					<td mat-cell *matCellDef="let element">
						{{ element.copy_count }}
					</td>
				</ng-container>

				<ng-container class="center-elements" matColumnDef="actions">
					<th mat-header-cell *matHeaderCellDef>Ações</th>
					<td mat-cell *matCellDef="let element">
						@for (action of allowedActions; track $index) {
						<button
							[disabled]="checkDisabled(action, element)"
							mat-icon-button
							matTooltip="{{ action }}"
							aria-label="Action button"
						>
							<mat-icon>{{ action | icon }}</mat-icon>
						</button>
						}
					</td>
				</ng-container>

				<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
				<tr
					mat-row
					*matRowDef="let row; columns: displayedColumns"
				></tr>
			</table>
		</div>

		<p>Arquivos selecionados: 1</p>
		<p style="margin-bottom: 2rem">Contagem de folhas: 123</p>

		<p>3. Defina o prazo de entrega</p>

		<div>
			<mat-form-field>
				<mat-label>Selecione um prazo</mat-label>
				<mat-select>
					@for (time of times; track time) {
					<mat-option [value]="time">{{ time }} horas</mat-option>
					}
				</mat-select>
			</mat-form-field>
		</div>

		<div>
			<button type="button" mat-flat-button>Enviar Solicitação</button>
		</div>
	</form>
</div>
